<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filament Winding Tool</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>Filament Winding Tool</h1>
                <p>Advanced Composite Design Platform</p>
            </div>
        </div>

        <div class="content">
            <!-- INPUT PANEL -->
            <div class="panel">
                <div class="panel-title">Configuration</div>

                <div class="alert alert-error" id="errorMsg">
                    <span class="alert-icon">!</span>
                    <span id="errorText"></span>
                </div>
                <div class="alert alert-success" id="successMsg">
                    <span class="alert-icon">✓</span>
                    <span id="successText"></span>
                </div>

                <div class="info-box">
                    Enter the layup sequence using standard notation (e.g., [0/±45/90]s) and configure the geometry parameters for accurate calculations.
                </div>

                <div class="form-group">
                    <label for="sequence">Layup Sequence</label>
                    <input type="text" id="sequence" value="[0/±45/90]s" placeholder="e.g., [0/±45/90]s">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="plyThickness">Ply Thickness (mm)</label>
                        <input type="number" id="plyThickness" value="0.125" min="0.01" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="material">Material</label>
                        <select id="material"><option>Loading...</option></select>
                    </div>
                </div>

                <div class="section-divider">
                    <div class="section-title">Geometry</div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="diameterBottom">Diameter Bottom (mm)</label>
                        <input type="number" id="diameterBottom" value="200" min="10" step="1">
                    </div>
                    <div class="form-group">
                        <label for="diameterTop">Diameter Top (mm)</label>
                        <input type="number" id="diameterTop" value="200" min="10" step="1">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="height">Height (mm)</label>
                        <input type="number" id="height" value="500" min="10" step="1">
                    </div>
                    <div class="form-group">
                        <label for="process">Process</label>
                        <select id="process"><option>Loading...</option></select>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn-primary" onclick="parseLayers()">Parse</button>
                    <button class="btn-primary" onclick="calculate()">Calculate</button>
                    <button class="btn-secondary" onclick="reset()">Reset</button>
                </div>

                <div class="section-divider">
                    <div class="section-title">Advanced CLT Analysis</div>
                </div>

                <div class="info-box">
                    Classical Laminate Theory (CLT) für Steifigkeitsmatrix (ABD), Versagensanalyse (Tsai-Wu) und Monte-Carlo Toleranzstudien.
                </div>

                <div class="section-title">Loads (N/m)</div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="loadNx">N<sub>x</sub></label>
                        <input type="number" id="loadNx" value="1000" step="10">
                    </div>
                    <div class="form-group">
                        <label for="loadNy">N<sub>y</sub></label>
                        <input type="number" id="loadNy" value="0" step="10">
                    </div>
                </div>
                <div class="form-row single">
                    <div class="form-group">
                        <label for="loadNxy">N<sub>xy</sub></label>
                        <input type="number" id="loadNxy" value="0" step="10">
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn-primary btn-abd" onclick="calculateLaminateProperties()">
                        <i class="fas fa-th-large"></i> ABD Matrix
                    </button>
                    <button class="btn-primary btn-failure" onclick="calculateFailureAnalysis()">
                        <i class="fas fa-exclamation-triangle"></i> Failure
                    </button>
                    <button class="btn-primary btn-tolerance" onclick="runToleranceStudy()">
                        <i class="fas fa-random"></i> Tolerance
                    </button>
                </div>

                <!-- CLT Results Section -->
                <div id="cltResults" class="clt-results hidden">
                    <div class="section-title section-title-spaced">CLT Analysis Results</div>

                    <div class="results-grid" id="cltResultsGrid">
                        <div class="result-card result-card--blue">
                            <div class="result-label">E_x (Stiffness)</div>
                            <div class="result-value" id="clt-ex">–</div>
                            <div class="result-unit">GPa</div>
                        </div>
                        <div class="result-card result-card--blue">
                            <div class="result-label">G_xy (Shear)</div>
                            <div class="result-value" id="clt-gxy">–</div>
                            <div class="result-unit">GPa</div>
                        </div>
                        <div class="result-card result-card--amber">
                            <div class="result-label">Min Safety Factor</div>
                            <div class="result-value" id="clt-sf">–</div>
                            <div class="result-unit">Factor</div>
                        </div>
                        <div class="result-card result-card--amber">
                            <div class="result-label">Critical Ply</div>
                            <div class="result-value" id="clt-ply">–</div>
                            <div class="result-unit">ID</div>
                        </div>
                        <div class="result-card result-card--green">
                            <div class="result-label">Status</div>
                            <div class="result-value status-value" id="clt-status">–</div>
                            <div class="result-unit">Design</div>
                        </div>
                        <div class="result-card result-card--green">
                            <div class="result-label">Probability</div>
                            <div class="result-value" id="clt-prob">–</div>
                            <div class="result-unit">%</div>
                        </div>
                    </div>

                    <div id="toleranceChartContainer" class="tolerance-chart hidden">
                        <div class="section-title section-title-spaced">Tolerance Study Statistics</div>
                        <div class="chart-container">
                            <canvas id="toleranceChart"></canvas>
                        </div>
                    </div>
                </div>

                <div id="summary" class="summary-box">
                    <strong>Results Summary</strong><br><br>
                    <div id="summaryText"></div>
                </div>
            </div>

            <!-- IMAGE PANEL -->
            <div class="panel image-panel">
                <div class="panel-title">Filament Winding Process</div>
                <img src="Filament-Winding-4.jpg" alt="Filament Winding Process">
            </div>

            <!-- AUTOCLAVE PROFILE -->
            <div class="panel autoclave-section">
                <div class="panel-title">Autoclave Profile</div>
                <div class="chart-container">
                    <canvas id="autoclaveChart"></canvas>
                </div>
            </div>

            <!-- TABLE & RESULTS -->
            <div class="panel table-section">
                <div class="panel-title">Layer Stack & Analysis</div>

                <div class="table-container">
                    <table id="layersTable">
                        <thead>
                            <tr>
                                <th>Layer</th>
                                <th>Angle (°)</th>
                                <th>Thickness (mm)</th>
                                <th>Material</th>
                                <th>Cumulative (mm)</th>
                            </tr>
                        </thead>
                        <tbody id="layersBody"></tbody>
                    </table>
                </div>

                <div class="results-grid" id="resultsGrid">
                    <div class="result-card">
                        <div class="result-label">Circumference</div>
                        <div class="result-value" id="circumference">–</div>
                        <div class="result-unit">meters</div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Path Length</div>
                        <div class="result-value" id="pathLength">–</div>
                        <div class="result-unit">meters</div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Passes</div>
                        <div class="result-value" id="passes">–</div>
                        <div class="result-unit">cycles</div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Processing Time</div>
                        <div class="result-value" id="time">–</div>
                        <div class="result-unit">minutes</div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Total Mass</div>
                        <div class="result-value" id="mass">–</div>
                        <div class="result-unit">kilograms</div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Stack Thickness</div>
                        <div class="result-value" id="totalThickness">–</div>
                        <div class="result-unit">millimeters</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
